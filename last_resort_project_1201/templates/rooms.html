<!-- checked: Rooms list verified -->
{% extends "base.html" %}
{% block content %}
<div class="row align-items-center mb-4">
    <div class="col-md-5">
        <h2>Rooms Management <small class="text-muted">({{ rooms|length }})</small></h2>
    </div>
    <div class="col-md-7">
        <form action="/rooms" method="get" class="d-flex gap-2 justify-content-end">
            <input type="text" name="search" class="form-control rounded-0" placeholder="Search Room # or Wing..." value="{{ request.args.get('search', '') }}">
            
            <select name="status" class="form-select w-auto rounded-0" onchange="this.form.submit()">
                <option value="All">All Statuses</option>
                <option value="Clean" {% if request.args.get('status') == 'Clean' %}selected{% endif %}>Clean</option>
                <option value="Dirty" {% if request.args.get('status') == 'Dirty' %}selected{% endif %}>Dirty</option>
                <option value="Occupied" {% if request.args.get('status') == 'Occupied' %}selected{% endif %}>Occupied</option>
            </select>
            
            <button type="submit" class="btn btn-primary">Search</button>
            {% if request.args.get('search') or request.args.get('status') != 'All' %}
            <a href="/rooms" class="btn btn-outline-secondary rounded-0">Reset</a>
            {% endif %}
        </form>
    </div>
</div>

<div class="table-scroll-container card rounded-0 border-0 shadow-sm">
    <table class="table table-custom align-middle mb-0">
        <thead>
            <tr>
                <th class="text-nowrap" style="width: 1%;">Room #</th>
                <th>Location</th>
                <th>Type</th>
                <th class="text-nowrap">Rate</th>
                <th class="text-nowrap text-center" style="width: 1%;">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for room in rooms %}
            <tr>
                <td class="text-nowrap">
                    <a href="/room/{{ room.roomId }}" class="text-decoration-none fw-bold fs-5 text-dark" style="font-family: 'Cinzel', serif;">{{ room.roomNumber }}</a>
                </td>
                <td>{{ room.wingName }} <span class="text-muted">/</span> Floor {{ room.floorNo }}</td>
                <td>{{ room.funcName }}</td>
                <td class="text-nowrap fw-bold" style="color: var(--primary-gold); font-family: monospace;">${{ room.baseRate }}</td>
                <td class="text-nowrap text-center">
                    <span class="status-badge {% if room.currentStatus=='Clean' %}status-clean{% elif room.currentStatus=='Occupied' %}status-occupied{% else %}status-dirty{% endif %}">
                        {{ room.currentStatus }}
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="mt-2 text-muted small text-end">Scroll to view more rooms â†•</div>
{% endblock %}